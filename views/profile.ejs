<!-- views/profile.ejs -->
<!doctype html>
<html>

<head>
	<%- include('partials/header.ejs'); %>
</head>

<body>

	<%- include('partials/navbar.ejs', {active: "Profile"}); %>
	<div class="content">



		<div class="container">

			<div class="page-header">
				<h1>
					<i class="fas fa-anchor"></i> Profile Page</h1>
				<a href="/logout" class="btn btn-default btn-sm">Logout</a>
			</div>

			<div class="row">

				<!-- LOCAL INFORMATION -->
				<div class="col-sm-6">
					<div class="well">
						<h3>
							<span class="fa fa-user"></span> Local</h3>

						<p>
							<strong>id</strong>:
							<%= user._id %>
								<br>
								<strong>email</strong>:
								<%= user.local.email %>
									<br>
									<strong>password</strong>:
									<%= user.local.password %>
						</p>

					</div>
				</div>

			</div>

		</div>




		</script>
		</head>

		<body>

			<% if (userKeysArray.length > 0) { %>

			<div class="container">
				<div class="table-wrapper">
					<div class="table-title">
						<div class="row">
							<div class="col-sm-6">
								<h2>
									<b><span class="fa fa-key"></span> Keys</b>
								</h2>
							</div>
						</div>
					</div>
					<table align="center" id="portfolioTable" style="width:auto;" class="table table-striped table-bordered table-hover table-condensed">
						<thead>
							<tr>
								<th>Exchange</th>
								<th>Key</th>
								<th>Date Added</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<% userKeysArray.forEach(function(userKeysArray) { %>
									<td>
										<%= userKeysArray.details.exchange %>
									</td>
									<td>
										<%= userKeysArray.details.key %><br>( secret: <%= userKeysArray.details.secret %>)
									</td>
									<!-- <td>
										<%= userKeysArray.details.secret %> 
									*hidden*
									</td> -->
									<td>
										<%= userKeysArray.details.added %>
									</td>
							</tr>
							<% }); %>
						</tbody>
					</table>

					

					<div class="container">
						<div class="table-wrapper">
							<div class="table-title">
								<div class="row">
									<div class="col-sm-6">
										<h2>
											<b><span class="fa fa-coins"></span> Coins</b>
										</h2>
									</div>
								</div>
							</div>

							<% } else { %>

								<h2> No keys added </h2>

							<% } %>

						<%	if (userCoinsArray.length > 0) { %>

					<table align="center" id="portfolioTable" style="width:auto;" class="table table-striped table-bordered table-hover table-condensed">
						<thead>
							<tr>
								<th>Exchange</th>
								<th>Coin</th>
								<th>Quantity</th>
								<th>Date Added</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<% userCoinsArray.forEach(function(userCoinsArray) { %>
									<td>
										<%= userCoinsArray.exchange %>
									</td>
									<td>
										<%= userCoinsArray.coinsymbol %>
									</td>
									<td>
										<%= userCoinsArray.quantity %>
									</td>
									<td>
										<%= userCoinsArray.dateadded %>
									</td>
							</tr>
							<% }); %>
						</tbody>
					</table>


				</div>
			</div>

			<% } else  { %>

				<h2> No coins added </h2>

				<% } %>
		<!--	<%- include('partials/footer.ejs'); %> -->


				<%- include('partials/script.ejs'); %>

			</div>
		</body>

</html>